<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Expense Fields Test</title>
</head>
<body>
    <h1>Dynamic Expense Fields Test</h1>
    <div id="output"></div>

    <script type="module">
        // Simulate the configuration data
        const configData = {
            "defaultValues": {
                "expenses": {
                    "essential": {
                        "rent": 1760,
                        "pets": 300,
                        "subscriptions": 56,
                        "carInsurance": 135,
                        "motoInsurance": 40,
                        "groceries": 860,
                        "gas": 100,
                        "phone": 100,
                        "utilities": 150,
                        "carLoan": 550,
                        "homeLoan": 364,
                        "healthcare": 200,
                        "internetService": 75
                    },
                    "nonEssential": {
                        "entertainment": 0,
                        "diningOut": 0,
                        "hobbies": 0,
                        "shopping": 0,
                        "travel": 0,
                        "miscNonEssential": 0,
                        "streaming": 25,
                        "coffeeTreats": 50
                    }
                }
            }
        };

        function formatFieldLabel(fieldName) {
            return fieldName
                .charAt(0).toUpperCase() +
                fieldName.slice(1).replace(/([A-Z])/g, ' $1');
        }

        function getExpenseFields() {
            const essential = configData.defaultValues.expenses.essential;
            const nonEssential = configData.defaultValues.expenses.nonEssential;

            return {
                essential: Object.keys(essential).map(field => ({
                    key: field,
                    label: formatFieldLabel(field),
                    defaultValue: essential[field]
                })),
                nonEssential: Object.keys(nonEssential).map(field => ({
                    key: field,
                    label: formatFieldLabel(field),
                    defaultValue: nonEssential[field]
                }))
            };
        }

        // Test the dynamic field generation
        const fields = getExpenseFields();
        const output = document.getElementById('output');

        output.innerHTML = `
            <h2>âœ… Test Results</h2>
            <h3>Essential Fields (${fields.essential.length}):</h3>
            <ul>
                ${fields.essential.map(field =>
                    `<li><strong>${field.key}</strong> â†’ "${field.label}" (Default: $${field.defaultValue})</li>`
                ).join('')}
            </ul>

            <h3>Non-Essential Fields (${fields.nonEssential.length}):</h3>
            <ul>
                ${fields.nonEssential.map(field =>
                    `<li><strong>${field.key}</strong> â†’ "${field.label}" (Default: $${field.defaultValue})</li>`
                ).join('')}
            </ul>

            <h3>âœ¨ New Fields Added:</h3>
            <ul>
                <li>âœ… <strong>healthcare</strong> â†’ "Healthcare" ($200)</li>
                <li>âœ… <strong>internetService</strong> â†’ "Internet Service" ($75)</li>
                <li>âœ… <strong>streaming</strong> â†’ "Streaming" ($25)</li>
                <li>âœ… <strong>coffeeTreats</strong> â†’ "Coffee Treats" ($50)</li>
            </ul>

            <p><strong>ðŸŽ‰ Dynamic expense field generation is working correctly!</strong></p>
            <p>The configuration file now drives the form fields automatically.</p>
        `;
    </script>
</body>
</html>